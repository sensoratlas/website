!function(a){"use strict";function c(t,i){this.element=t,this.config=i,this._items=a(),this._makeItems(),this._bindEvents()}function o(t,i){var o=this;this.element=t,this.config=i,Object.defineProperty(this,"section",{value:a(o.element.attr("href"))}),Object.defineProperty(this,"offset",{get:function(){var t=a(".u-header"),i=getComputedStyle(t.get(0)),e=i.position,n=o.section.offset().top;return t.length&&"fixed"==e&&0==parseInt(i.top)&&(n=n-t.outerHeight()-parseInt(i.marginTop)),o.config.over.length&&(n-=o.config.over.outerHeight()),n}})}a.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:"linear",over:a(),activeItemClass:"active",afterShow:function(){},beforeShow:function(){}},_pageCollection:a(),init:function(t,o){var h=this;return t&&t.length?(t.each(function(t,i){var e=a(i),n=o&&a.isPlainObject(o)?a.extend(!0,{},h._baseConfig,o,e.data()):a.extend(!0,{},h._baseConfig,e.data());e.data("HSScrollNav")||(e.data("HSScrollNav",new c(e,n)),h._pageCollection=h._pageCollection.add(e))}),a(window).on("scroll.HSScrollNav",function(){h._pageCollection.each(function(t,i){a(i).data("HSScrollNav").highlight()})}).trigger("scroll.HSScrollNav"),t):a()}},c.prototype._makeItems=function(){var n=this;this.element.find('a[href^="#"]').each(function(t,i){var e=a(i);e.data("HSScrollNavSection")||(e.data("HSScrollNavSection",new o(e,n.config)),n._items=n._items.add(e))})},c.prototype._bindEvents=function(){var e=this;this.element.on("click.HSScrollNav",'a[href^="#"]',function(t){var i=this;e._lockHightlight=!0,e.current&&e.current.unhighlight(),i.blur(),e.current=a(i).data("HSScrollNavSection"),e.current.highlight(),a(this).data("HSScrollNavSection").show(function(){e._lockHightlight=!1}),t.preventDefault()})},c.prototype.highlight=function(){var n,o;if(this._items.length&&!this._lockHightlight){if((o=a(window).scrollTop())+a(window).height()===a(document).height())return this.current=this._items.last().data("HSScrollNavSection"),this.unhighlight(),this.current.highlight(),void this.current.changeHash();this._items.each(function(t,i){var e=a(i).data("HSScrollNavSection");e.section;o>e.offset&&(n=e)}),n&&this.current!=n&&(this.unhighlight(),n.highlight(),this.current&&n.changeHash(),this.current=n)}},c.prototype.unhighlight=function(){this._items.each(function(t,i){a(i).data("HSScrollNavSection").unhighlight()})},o.prototype.show=function(t){var i=this;this.section.length&&(i.config.beforeShow.call(i.section),this.changeHash(),a("html, body").stop().animate({scrollTop:i.offset+3},{duration:i.config.duration,easing:i.config.easing,complete:function(){a("html, body").stop().animate({scrollTop:i.offset+3},{duration:i.config.duration,easing:i.config.easing,complete:function(){i.config.afterShow.call(i.section),a.isFunction(t)&&t()}})}}))},o.prototype.changeHash=function(){this.section.attr("id",""),window.location.hash=this.element.attr("href"),this.section.attr("id",this.element.attr("href").slice(1))},o.prototype.highlight=function(){var t=this.element.parent("li");t.length&&t.addClass(this.config.activeItemClass)},o.prototype.unhighlight=function(){var t=this.element.parent("li");t.length&&t.removeClass(this.config.activeItemClass)}}(jQuery);